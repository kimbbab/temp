<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ìˆ«ì ì¹´ë“œ ê²Œì„</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
    .page { display: none; }
    .active { display: block; }
    button { margin: 5px; padding: 10px 20px; font-size: 16px; }
    .card { display: inline-block; border: 1px solid #000; padding: 20px; margin: 5px; font-size: 40px; width: 70px; height: 100px; text-align: center; vertical-align: middle; }
    .hidden { background: #ccc; color: #ccc; }
    .row { margin: 5px 0; }
    .game-area { display: flex; height: 80vh; position: relative; }
    .player-side { display: flex; flex-direction: column; justify-content: center; align-items: center; width: 20%; }
    .center-area { flex-grow: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; }
    .card-area { display: flex; justify-content: center; gap: 50px; margin: 20px 0; }
    .selected { background-color: #d0eaff !important; }
    #cardPile { position: absolute; bottom: 10px; right: 10px; display: flex; flex-wrap: wrap; gap: 5px; max-width: 200px; }
    .pile-card { width: 30px; height: 40px; border: 1px solid #000; text-align: center; line-height: 40px; font-size: 16px; background: #eee; }
    #cardPileLabel { position: absolute; bottom: 60px; right: 10px; font-size: 14px; font-weight: bold; }
    .score-box { margin-top: 20px; font-weight: bold; }
    #finalMessage { font-size: 20px; color: green; margin-top: 15px; white-space: pre-line; }
  </style>
</head>
<body>
  <div id="page1" class="page active">
    <h1>ìˆ«ì ì¹´ë“œ ì¶”ì¸¡ ê²Œì„</h1>
    <p><strong>ì¸ì›:</strong> 2ëª… (ì§„í–‰ìëŠ” ì»´í“¨í„°)</p>
    <p><strong>ì¤€ë¹„ë¬¼:</strong> ìˆ«ì 1~10 ì¹´ë“œ 2ì„¸íŠ¸ (ì´ 20ì¥)</p>
    <h3>ê²Œì„ ë°©ë²•:</h3>
    <ol style="text-align:left; display:inline-block;">
      <li>ì»´í“¨í„°ê°€ ë‘ ì¥ì˜ ì¹´ë“œë¥¼ ë¬´ì‘ìœ„ë¡œ ë½‘ì•„, í•œ ì¥ì€ ë³´ì´ê²Œ, í•œ ì¥ì€ ê°€ë¦¬ê²Œ ë†“ìŠµë‹ˆë‹¤.</li>
      <li>ë‘ ì°¸ê°€ìëŠ” ê°€ë ¤ì§„ ì¹´ë“œê°€ ë³´ì´ëŠ” ì¹´ë“œë³´ë‹¤ <strong>í´ì§€, ì‘ë‹¤ì§€, ê°™ì„ì§€</strong> ì¶”ì¸¡í•©ë‹ˆë‹¤.</li>
      <li>ì •ë‹µì„ ë§íŒ ì°¸ê°€ìëŠ” 1ì ì„ íšë“í•©ë‹ˆë‹¤.</li>
      <li>ë‚¨ì€ ì¹´ë“œê°€ ì—†ì„ ë•Œê¹Œì§€ ë°˜ë³µí•˜ë©°, ì ìˆ˜ê°€ ë†’ì€ ì‚¬ëŒì´ ìŠ¹ë¦¬í•©ë‹ˆë‹¤.</li>
    </ol>
    <button onclick="startGame()">ê²Œì„ ì‹œì‘</button>
  </div>

  <div id="page2" class="page">
    <div class="game-area">
      <div class="player-side">
        <h3>í”Œë ˆì´ì–´ A</h3>
        <button onclick="makeGuess('A', 'í¬ë‹¤', this)">í¬ë‹¤</button>
        <button onclick="makeGuess('A', 'ì‘ë‹¤', this)">ì‘ë‹¤</button>
        <button onclick="makeGuess('A', 'ê°™ë‹¤', this)">ê°™ë‹¤</button>
        <div id="scoreA" class="score-box"></div>
      </div>
      <div class="center-area">
        <div class="card-area">
          <div id="visibleCard" class="card"></div>
          <div id="hiddenCard" class="card hidden">?</div>
        </div>
        <div id="result"></div>
        <div id="finalMessage"></div>
        <button id="checkButton" onclick="showAnswer()">í™•ì¸í•˜ê¸°</button>
        <button onclick="nextRound()">ë‹¤ìŒ ë¼ìš´ë“œ</button>
      </div>
      <div class="player-side">
        <h3>í”Œë ˆì´ì–´ B</h3>
        <button onclick="makeGuess('B', 'í¬ë‹¤', this)">í¬ë‹¤</button>
        <button onclick="makeGuess('B', 'ì‘ë‹¤', this)">ì‘ë‹¤</button>
        <button onclick="makeGuess('B', 'ê°™ë‹¤', this)">ê°™ë‹¤</button>
        <div id="scoreB" class="score-box"></div>
      </div>
      <div id="cardPileLabel">ì‚¬ìš©í•œ ì¹´ë“œ</div>
      <div id="cardPile"></div>
    </div>
  </div>

  <script>
    let cards = [],
        visible = null,
        hidden = null,
        guesses = { A: null, B: null },
        score = { A: 0, B: 0 },
        currentButtons = { A: null, B: null },
        roundHistory = [],
        roundIndex = 0,
        answerRevealed = false;

    function startGame() {
      document.getElementById('page1').classList.remove('active');
      document.getElementById('page2').classList.add('active');
      cards = [...Array(10).keys()].map(n => n + 1).concat([...Array(10).keys()].map(n => n + 1));
      shuffle(cards);
      roundHistory = [];
      roundIndex = 0;
      document.getElementById('cardPile').innerHTML = '';
      document.getElementById('finalMessage').textContent = '';
      answerRevealed = false;
      nextRound();
    }

    function shuffle(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
    }

    function nextRound() {
      if (!answerRevealed && roundIndex > 0) return alert("ë¨¼ì € 'í™•ì¸í•˜ê¸°'ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.");
      document.getElementById('result').textContent = '';
      guesses = { A: null, B: null };
      ['A', 'B'].forEach(p => {
        if (currentButtons[p]) currentButtons[p].classList.remove('selected');
        currentButtons[p] = null;
      });

      if (cards.length < 2) {
        endGame();
        return;
      }

      visible = cards.pop();
      hidden = cards.pop();

      document.getElementById('visibleCard').textContent = visible;
      document.getElementById('hiddenCard').textContent = '?';
      document.getElementById('hiddenCard').classList.add('hidden');
      answerRevealed = false;
      document.getElementById('checkButton').disabled = false;
      updateScore();
    }

    function makeGuess(player, guess, button) {
      guesses[player] = guess;
      if (currentButtons[player]) currentButtons[player].classList.remove('selected');
      button.classList.add('selected');
      currentButtons[player] = button;
    }

    function showAnswer() {
      if (answerRevealed) return;
      if (!guesses.A || !guesses.B) return alert("ì–‘ í”Œë ˆì´ì–´ ëª¨ë‘ ì„ íƒí•´ì•¼ í•©ë‹ˆë‹¤.");

      document.getElementById('hiddenCard').classList.remove('hidden');
      document.getElementById('hiddenCard').textContent = hidden;

      let resultText = '';
      const compare = hidden > visible ? 'í¬ë‹¤' : hidden < visible ? 'ì‘ë‹¤' : 'ê°™ë‹¤';

      ['A', 'B'].forEach(p => {
        if (guesses[p] === compare) {
          score[p]++;
          resultText += `í”Œë ˆì´ì–´ ${p} ì •ë‹µ! +1ì \n`;
        } else {
          resultText += `í”Œë ˆì´ì–´ ${p} ì˜¤ë‹µ\n`;
        }
      });

      document.getElementById('result').textContent = resultText;
      updateScore();
      addToPile(visible);
      addToPile(hidden);
      roundHistory.push([visible, hidden]);
      roundIndex++;
      answerRevealed = true;
      document.getElementById('checkButton').disabled = true;
    }

    function endGame() {
      let message = `ê²Œì„ ì¢…ë£Œ!\ní”Œë ˆì´ì–´ A: ${score.A}ì  | í”Œë ˆì´ì–´ B: ${score.B}ì \n`;
      if (score.A > score.B) {
        message += "ğŸ‰ í”Œë ˆì´ì–´ A ìŠ¹ë¦¬! ì¶•í•˜í•©ë‹ˆë‹¤!";
      } else if (score.B > score.A) {
        message += "ğŸ‰ í”Œë ˆì´ì–´ B ìŠ¹ë¦¬! ì¶•í•˜í•©ë‹ˆë‹¤!";
      } else {
        message += "ë¬´ìŠ¹ë¶€ì…ë‹ˆë‹¤! ì˜í•˜ì…¨ìŠµë‹ˆë‹¤!";
      }
      document.getElementById('finalMessage').textContent = message;
    }

    function addToPile(cardValue) {
      const pile = document.getElementById('cardPile');
      const div = document.createElement('div');
      div.className = 'pile-card';
      div.textContent = cardValue;
      pile.appendChild(div);
    }

    function updateScore() {
      document.getElementById('scoreA').textContent = `ì ìˆ˜: ${score.A}`;
      document.getElementById('scoreB').textContent = `ì ìˆ˜: ${score.B}`;
    }
  </script>
</body>
</html>
